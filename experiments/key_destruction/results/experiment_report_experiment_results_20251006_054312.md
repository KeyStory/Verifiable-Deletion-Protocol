# 密钥销毁实验报告

**生成时间**: 2025-10-06 06:00:28

**数据文件**: `experiment_results_20251006_054312.csv`

---


## 执行摘要


本实验评估了4种密钥销毁方法的安全性，共进行了120次独立实验。

**关键发现**：

1. **最安全方法**: `ctypes_secure` (平均可恢复 0.00 字节/32字节)
2. **最不安全方法**: `simple_del` (平均可恢复 32.00 字节/32字节)
3. **统计显著性**: ANOVA检验表明不同方法间存在极显著差异 (p < 0.001)
4. **性能影响**: 所有方法的执行时间差异小于0.2ms，性能不是主要考虑因素

**推荐**：生产环境应使用 `ctypes_secure` 方法，以确保密钥销毁的完全性和确定性。



## 实验设计


### 研究问题

不同密钥销毁方法在安全性和性能上是否存在显著差异？


### 假设

- **H0 (零假设)**: 所有销毁方法的安全性无显著差异

- **H1 (对立假设)**: 不同方法的安全性存在显著差异


### 实验方法


1. **自变量**: 密钥销毁方法（4种）
   - `simple_del`: 简单Python del语句
   - `single_overwrite`: 单次随机覆写
   - `dod_overwrite`: DoD 5220.22-M标准（3次覆写）
   - `ctypes_secure`: ctypes内存操作（覆写+清零）

2. **因变量**: 
   - 主要指标: 可恢复字节数 (0-32)
   - 次要指标: 销毁时间 (毫秒)

3. **控制变量**:
   - 密钥长度: 32字节（AES-256标准）
   - 测试模式: 固定字符串
   - 运行环境: 相同的Python进程

4. **样本量**: 每种方法重复 30 次

5. **测量方法**: 
   - 直接检查bytearray内存内容
   - 逐字节对比销毁前后数据



## 实验结果


### 描述性统计

| 方法 | N | 均值 | 标准差 | 最小值 | 最大值 |
| --- | --- | --- | --- | --- | --- |
| `ctypes_secure` | 30 | 0.00 | 0.00 | 0 | 0 |
| `dod_overwrite` | 30 | 0.10 | 0.31 | 0 | 1 |
| `simple_del` | 30 | 32.00 | 0.00 | 32 | 32 |
| `single_overwrite` | 30 | 0.07 | 0.25 | 0 | 1 |


### 性能数据

| 方法 | 平均销毁时间(ms) | 标准差(ms) |
| --- | --- | --- |
| `ctypes_secure` | 1.1223 | 0.0752 |
| `dod_overwrite` | 1.1378 | 0.1229 |
| `simple_del` | 1.0746 | 0.1397 |
| `single_overwrite` | 1.1124 | 0.0960 |


## 统计分析


### ANOVA检验


**方差分析结果**:

- 组间平方和 (SSB): 22960.23
- 组内平方和 (SSW): 4.57
- F统计量: **194,407.74**
- 自由度: df1=3, df2=116
- 显著性: p < 0.001 (极显著)

**解释**: F值远大于临界值，拒绝零假设。不同销毁方法的安全性存在极显著差异。



## 讨论


### 主要发现


1. **simple_del 完全无效**
   - 100%的实验中数据完全可恢复
   - 证明简单的Python del语句不会清除内存中的实际数据
   - 与威胁模型中的T-I-001威胁一致

2. **覆写方法的随机性问题**
   - single_overwrite 和 dod_overwrite 偶尔出现1字节"可恢复"
   - 分析表明这是随机数碰巧与原值相同的概率问题
   - 实际上数据已被破坏，不是真正的"可恢复"

3. **ctypes_secure 最可靠**
   - 100%的实验中可恢复字节数为0
   - 通过"覆写+清零"的组合策略消除随机性
   - 适合对安全性有严格要求的场景

4. **性能不是瓶颈**
   - 所有方法的时间开销差异<0.2ms
   - 对于密钥管理操作，安全性应优先于性能



### 局限性


1. **内存检测方法**: 当前使用直接检查Python对象的方式，未使用专业内存取证工具
2. **测试环境**: 仅在Windows 11 + Python 3.13环境下测试
3. **密钥类型**: 仅测试固定长度（32字节）的对称密钥
4. **样本量**: 每种方法30次重复，可考虑增加到100次



## 结论与建议


基于120次实验的定量分析，本研究得出以下结论：

1. **不同密钥销毁方法的安全性存在极显著差异** (F = 194,407.74, p < 0.001)

2. **推荐使用 ctypes_secure 方法**:
   - 安全性: A级（0字节可恢复，无方差）
   - 性能: 可接受（<2ms）
   - 可靠性: 100%成功率

3. **避免使用 simple_del**:
   - 完全不安全（100%可恢复）
   - 不符合任何安全标准

4. **实践建议**:
   - 生产环境应实施多层防御
   - 结合密钥销毁和区块链存证
   - 定期进行安全审计

**对GDPR合规的意义**:
本研究为"被遗忘权"的技术实现提供了量化证据，证明通过适当的密钥销毁方法可以实现真正的数据删除。



## 附录


### A. 实验环境


- **操作系统**: Windows 11
- **Python版本**: 3.13.2
- **关键库**: src.kms (自研)
- **实验日期**: 2025-10-06
- **数据文件**: `experiment_results_20251006_054312.csv`



### B. 原始数据

完整数据见: `experiments\key_destruction\results\experiment_results_20251006_054312.csv`
